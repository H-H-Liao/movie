FROM node:14

WORKDIR /usr/src/app

COPY . ./
RUN npm install

EXPOSE 8080

ENV HOST=0.0.0.0
ENV PORT=8080

ARG TMDB_API_BASE_URL 
ARG TMDB_API_KEY

ARG API_BASE_URL 
ARG AUTH_URL

ENV TMDB_API_BASE_URL ${TMDB_API_BASE_URL}
ENV TMDB_API_KEY ${TMDB_API_KEY}

ENV API_BASE_URL ${API_BASE_URL}
ENV AUTH_URL ${AUTH_URL}

RUN npm run build

CMD [ "npm", "run", "start" ]
